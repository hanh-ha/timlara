{"ast":null,"code":"import _regeneratorRuntime from\"/var/www/timlara-admin-reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(postLogin),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(getCurrentAdmin),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(updateAdminAccount),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(createAdminAccount),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(getAdminAccounts),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(getAdminAccount),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(updateAdminRole),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(createAdminRole),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(getAdminRoles),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(getAdminRole),_marked11=/*#__PURE__*/_regeneratorRuntime.mark(adminActions);import{AllTypeActions}from'../types';import{put,takeLatest}from'redux-saga/effects';import{Requests}from'../requests';import{getApiUrl,ENDPOINTS}from'../endpoints';import{showMessage}from'../actions';function postLogin(_ref){var input,type,apiUrl,data;return _regeneratorRuntime.wrap(function postLogin$(_context){while(1){switch(_context.prev=_context.next){case 0:input=_ref.input,type=_ref.type;_context.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context.prev=3;apiUrl=getApiUrl(ENDPOINTS.POST_LOGIN);_context.next=7;return Requests.post(apiUrl,input,false);case 7:data=_context.sent;if(!(data&&data.success)){_context.next=14;break;}localStorage.setItem('backoffice_token',data.token);_context.next=12;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data});case 12:_context.next=16;break;case 14:_context.next=16;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 16:_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](3);_context.next=22;return put({type:\"\".concat(type,\"_FAIL\"),error:_context.t0.toString()});case 22:case\"end\":return _context.stop();}}},_marked,null,[[3,18]]);}function getCurrentAdmin(_ref2){var type,apiUrl,data;return _regeneratorRuntime.wrap(function getCurrentAdmin$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:type=_ref2.type;_context2.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context2.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_CURRENT_ADMIN);_context2.next=7;return Requests.get(apiUrl);case 7:data=_context2.sent;if(!(data&&data.success)){_context2.next=15;break;}_context2.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.data});case 11:_context2.next=13;return put({type:\"LOAD_ALL_PERMISSION\",data:data.all_permissions});case 13:_context2.next=17;break;case 15:_context2.next=17;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 17:_context2.next=23;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](3);_context2.next=23;return put({type:\"\".concat(type,\"_FAIL\"),error:_context2.t0.toString()});case 23:case\"end\":return _context2.stop();}}},_marked2,null,[[3,19]]);}function updateAdminAccount(_ref3){var id,input,type,apiUrl,data;return _regeneratorRuntime.wrap(function updateAdminAccount$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:id=_ref3.id,input=_ref3.input,type=_ref3.type;_context3.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context3.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_ADMIN_ACCOUNT,{id:id});_context3.next=7;return Requests.put(apiUrl,input);case 7:data=_context3.sent;if(!(data&&data.success)){_context3.next=15;break;}_context3.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.account});case 11:_context3.next=13;return put(showMessage('Update addmin account successful!'));case 13:_context3.next=17;break;case 15:_context3.next=17;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 17:_context3.next=23;break;case 19:_context3.prev=19;_context3.t0=_context3[\"catch\"](3);_context3.next=23;return put({type:\"\".concat(type,\"_FAIL\"),error:_context3.t0.toString()});case 23:case\"end\":return _context3.stop();}}},_marked3,null,[[3,19]]);}function createAdminAccount(_ref4){var input,type,apiUrl,data;return _regeneratorRuntime.wrap(function createAdminAccount$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:input=_ref4.input,type=_ref4.type;_context4.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context4.prev=3;apiUrl=getApiUrl(ENDPOINTS.CREATE_ADMIN_ACCOUNT);_context4.next=7;return Requests.post(apiUrl,input);case 7:data=_context4.sent;if(!(data&&data.success)){_context4.next=15;break;}_context4.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.account});case 11:_context4.next=13;return put(showMessage('Create addmin account successful!'));case 13:_context4.next=17;break;case 15:_context4.next=17;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 17:_context4.next=23;break;case 19:_context4.prev=19;_context4.t0=_context4[\"catch\"](3);_context4.next=23;return put({type:\"\".concat(type,\"_FAIL\"),error:_context4.t0.toString()});case 23:case\"end\":return _context4.stop();}}},_marked4,null,[[3,19]]);}function getAdminAccounts(_ref5){var type,limit,offset,apiUrl,data;return _regeneratorRuntime.wrap(function getAdminAccounts$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:type=_ref5.type,limit=_ref5.limit,offset=_ref5.offset;_context5.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context5.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_ADMIN_ACCOUNTS);_context5.next=7;return Requests.get(apiUrl,{limit:limit,offset:offset});case 7:data=_context5.sent;if(!(data&&data.success)){_context5.next=13;break;}_context5.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.accounts});case 11:_context5.next=15;break;case 13:_context5.next=15;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 15:_context5.next=21;break;case 17:_context5.prev=17;_context5.t0=_context5[\"catch\"](3);_context5.next=21;return put({type:\"\".concat(type,\"_FAIL\"),error:_context5.t0.toString()});case 21:case\"end\":return _context5.stop();}}},_marked5,null,[[3,17]]);}function getAdminAccount(_ref6){var type,id,apiUrl,data;return _regeneratorRuntime.wrap(function getAdminAccount$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:type=_ref6.type,id=_ref6.id;_context6.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context6.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_ADMIN_ACCOUNT,{id:id});_context6.next=7;return Requests.get(apiUrl);case 7:data=_context6.sent;if(!(data&&data.success)){_context6.next=13;break;}_context6.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.account});case 11:_context6.next=15;break;case 13:_context6.next=15;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 15:_context6.next=21;break;case 17:_context6.prev=17;_context6.t0=_context6[\"catch\"](3);_context6.next=21;return put({type:\"\".concat(type,\"_FAIL\"),error:_context6.t0.toString()});case 21:case\"end\":return _context6.stop();}}},_marked6,null,[[3,17]]);}function updateAdminRole(_ref7){var id,input,type,apiUrl,data;return _regeneratorRuntime.wrap(function updateAdminRole$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:id=_ref7.id,input=_ref7.input,type=_ref7.type;_context7.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context7.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_ADMIN_ROLE,{id:id});_context7.next=7;return Requests.put(apiUrl,input);case 7:data=_context7.sent;if(!(data&&data.success)){_context7.next=15;break;}_context7.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.role});case 11:_context7.next=13;return put(showMessage('Update addmin role successful!'));case 13:_context7.next=17;break;case 15:_context7.next=17;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 17:_context7.next=23;break;case 19:_context7.prev=19;_context7.t0=_context7[\"catch\"](3);_context7.next=23;return put({type:\"\".concat(type,\"_FAIL\"),error:_context7.t0.toString()});case 23:case\"end\":return _context7.stop();}}},_marked7,null,[[3,19]]);}function createAdminRole(_ref8){var input,type,apiUrl,data;return _regeneratorRuntime.wrap(function createAdminRole$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:input=_ref8.input,type=_ref8.type;_context8.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context8.prev=3;apiUrl=getApiUrl(ENDPOINTS.CREATE_ADMIN_ROLE);_context8.next=7;return Requests.post(apiUrl,input);case 7:data=_context8.sent;if(!(data&&data.success)){_context8.next=15;break;}_context8.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.role});case 11:_context8.next=13;return put(showMessage('Create addmin role successful!'));case 13:_context8.next=17;break;case 15:_context8.next=17;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 17:_context8.next=23;break;case 19:_context8.prev=19;_context8.t0=_context8[\"catch\"](3);_context8.next=23;return put({type:\"\".concat(type,\"_FAIL\"),error:_context8.t0.toString()});case 23:case\"end\":return _context8.stop();}}},_marked8,null,[[3,19]]);}function getAdminRoles(_ref9){var type,limit,offset,apiUrl,data;return _regeneratorRuntime.wrap(function getAdminRoles$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:type=_ref9.type,limit=_ref9.limit,offset=_ref9.offset;_context9.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context9.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_ADMIN_ROLES);_context9.next=7;return Requests.get(apiUrl,{limit:limit,offset:offset});case 7:data=_context9.sent;if(!(data&&data.success)){_context9.next=13;break;}_context9.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.roles,total:data.total});case 11:_context9.next=15;break;case 13:_context9.next=15;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 15:_context9.next=21;break;case 17:_context9.prev=17;_context9.t0=_context9[\"catch\"](3);_context9.next=21;return put({type:\"\".concat(type,\"_FAIL\"),error:_context9.t0.toString()});case 21:case\"end\":return _context9.stop();}}},_marked9,null,[[3,17]]);}function getAdminRole(_ref10){var type,id,apiUrl,data;return _regeneratorRuntime.wrap(function getAdminRole$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:type=_ref10.type,id=_ref10.id;_context10.next=3;return put({type:\"\".concat(type,\"_ATTEMPT\")});case 3:_context10.prev=3;apiUrl=getApiUrl(ENDPOINTS.GET_ADMIN_ROLE,{id:id});_context10.next=7;return Requests.get(apiUrl);case 7:data=_context10.sent;if(!(data&&data.success)){_context10.next=13;break;}_context10.next=11;return put({type:\"\".concat(type,\"_SUCCESS\"),data:data.role});case 11:_context10.next=15;break;case 13:_context10.next=15;return put({type:\"\".concat(type,\"_FAIL\"),error:data.message});case 15:_context10.next=21;break;case 17:_context10.prev=17;_context10.t0=_context10[\"catch\"](3);_context10.next=21;return put({type:\"\".concat(type,\"_FAIL\"),error:_context10.t0.toString()});case 21:case\"end\":return _context10.stop();}}},_marked10,null,[[3,17]]);}export function adminActions(){return _regeneratorRuntime.wrap(function adminActions$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return takeLatest(AllTypeActions.POST_LOGIN,postLogin);case 2:_context11.next=4;return takeLatest(AllTypeActions.GET_CURRENT_ADMIN,getCurrentAdmin);case 4:_context11.next=6;return takeLatest(AllTypeActions.GET_ADMIN_ACCOUNTS,getAdminAccounts);case 6:_context11.next=8;return takeLatest(AllTypeActions.GET_ADMIN_ACCOUNT,getAdminAccount);case 8:_context11.next=10;return takeLatest(AllTypeActions.CREATE_ADMIN_ACCOUNT,createAdminAccount);case 10:_context11.next=12;return takeLatest(AllTypeActions.UPDATE_ADMIN_ACCOUNT,updateAdminAccount);case 12:_context11.next=14;return takeLatest(AllTypeActions.GET_ADMIN_ROLES,getAdminRoles);case 14:_context11.next=16;return takeLatest(AllTypeActions.GET_ADMIN_ROLE,getAdminRole);case 16:_context11.next=18;return takeLatest(AllTypeActions.UPDATE_ADMIN_ROLE,updateAdminRole);case 18:_context11.next=20;return takeLatest(AllTypeActions.CREATE_ADMIN_ROLE,createAdminRole);case 20:case\"end\":return _context11.stop();}}},_marked11);}","map":{"version":3,"sources":["/var/www/timlara-admin-reactjs/src/store/sagas/admin.ts"],"names":["postLogin","getCurrentAdmin","updateAdminAccount","createAdminAccount","getAdminAccounts","getAdminAccount","updateAdminRole","createAdminRole","getAdminRoles","getAdminRole","adminActions","AllTypeActions","put","takeLatest","Requests","getApiUrl","ENDPOINTS","showMessage","input","type","apiUrl","POST_LOGIN","post","data","success","localStorage","setItem","token","error","message","toString","GET_CURRENT_ADMIN","get","all_permissions","id","GET_ADMIN_ACCOUNT","account","CREATE_ADMIN_ACCOUNT","limit","offset","GET_ADMIN_ACCOUNTS","accounts","GET_ADMIN_ROLE","role","CREATE_ADMIN_ROLE","GET_ADMIN_ROLES","roles","total","UPDATE_ADMIN_ACCOUNT","UPDATE_ADMIN_ROLE"],"mappings":"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","sourcesContent":["import { AllTypeActions } from '../types';\nimport { put, takeLatest } from 'redux-saga/effects';\nimport { Requests } from '../requests';\nimport { AnyAction } from 'redux';\nimport { getApiUrl, ENDPOINTS } from '../endpoints';\nimport { showMessage } from '../actions';\n\nfunction* postLogin({ input, type }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.POST_LOGIN);\n\t\tconst data: any = yield Requests.post(apiUrl, input, false);\n\t\tif (data && data.success) {\n\t\t\tlocalStorage.setItem('backoffice_token', data.token);\n\t\t\tyield put({ type: `${type}_SUCCESS`, data });\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* getCurrentAdmin({ type }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_CURRENT_ADMIN);\n\t\tconst data: any = yield Requests.get(apiUrl);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.data });\n\t\t\tyield put({ type: `LOAD_ALL_PERMISSION`, data: data.all_permissions });\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t\t// force logout\n\t\t\t// localStorage.removeItem('backoffice_token');\n\t\t\t// window.location.href = '/';\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t\t// force logout\n\t\t// localStorage.removeItem('backoffice_token');\n\t\t// window.location.href = '/';\n\t}\n}\n\nfunction* updateAdminAccount({ id, input, type }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_ADMIN_ACCOUNT, { id });\n\t\tconst data: any = yield Requests.put(apiUrl, input);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.account });\n\t\t\tyield put(showMessage('Update addmin account successful!'));\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* createAdminAccount({ input, type }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.CREATE_ADMIN_ACCOUNT);\n\t\tconst data: any = yield Requests.post(apiUrl, input);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.account });\n\t\t\tyield put(showMessage('Create addmin account successful!'));\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* getAdminAccounts({ type, limit, offset }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_ADMIN_ACCOUNTS);\n\t\tconst data: any = yield Requests.get(apiUrl, { limit, offset });\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.accounts });\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* getAdminAccount({ type, id }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_ADMIN_ACCOUNT, { id });\n\t\tconst data: any = yield Requests.get(apiUrl);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.account });\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* updateAdminRole({ id, input, type }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_ADMIN_ROLE, { id });\n\t\tconst data: any = yield Requests.put(apiUrl, input);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.role });\n\t\t\tyield put(showMessage('Update addmin role successful!'));\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* createAdminRole({ input, type }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.CREATE_ADMIN_ROLE);\n\t\tconst data: any = yield Requests.post(apiUrl, input);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.role });\n\t\t\tyield put(showMessage('Create addmin role successful!'));\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* getAdminRoles({ type, limit, offset }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_ADMIN_ROLES);\n\t\tconst data: any = yield Requests.get(apiUrl, { limit, offset });\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.roles, total: data.total });\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nfunction* getAdminRole({ type, id }: AnyAction) {\n\tyield put({ type: `${type}_ATTEMPT` });\n\ttry {\n\t\tconst apiUrl = getApiUrl(ENDPOINTS.GET_ADMIN_ROLE, { id });\n\t\tconst data: any = yield Requests.get(apiUrl);\n\t\tif (data && data.success) {\n\t\t\tyield put({ type: `${type}_SUCCESS`, data: data.role });\n\t\t} else {\n\t\t\tyield put({ type: `${type}_FAIL`, error: data.message });\n\t\t}\n\t} catch (e) {\n\t\tyield put({ type: `${type}_FAIL`, error: e.toString() });\n\t}\n}\n\nexport function* adminActions() {\n\tyield takeLatest(AllTypeActions.POST_LOGIN, postLogin);\n\tyield takeLatest(AllTypeActions.GET_CURRENT_ADMIN, getCurrentAdmin);\n\tyield takeLatest(AllTypeActions.GET_ADMIN_ACCOUNTS, getAdminAccounts);\n\tyield takeLatest(AllTypeActions.GET_ADMIN_ACCOUNT, getAdminAccount);\n\tyield takeLatest(AllTypeActions.CREATE_ADMIN_ACCOUNT, createAdminAccount);\n\tyield takeLatest(AllTypeActions.UPDATE_ADMIN_ACCOUNT, updateAdminAccount);\n\tyield takeLatest(AllTypeActions.GET_ADMIN_ROLES, getAdminRoles);\n\tyield takeLatest(AllTypeActions.GET_ADMIN_ROLE, getAdminRole);\n\tyield takeLatest(AllTypeActions.UPDATE_ADMIN_ROLE, updateAdminRole);\n\tyield takeLatest(AllTypeActions.CREATE_ADMIN_ROLE, createAdminRole);\n}\n"]},"metadata":{},"sourceType":"module"}